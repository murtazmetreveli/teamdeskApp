"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4193],{4193:(k,g,n)=>{n.r(g),n.d(g,{EnterDetailsModule:()=>I});var h=n(177),i=n(5933),v=n(1542),p=n(6565),c=n(467),m=n(6598),e=n(6276),b=n(7157),C=n(8194),y=n(7772),D=n(310),O=n(369),x=n(5162),E=n(5761),u=n(4341),S=n(4503);function U(a,P){1&a&&(e.j41(0,"ion-col",8)(1,"ion-text",9),e.EFF(2,"Enter collection details below"),e.k0s()())}const R=function(a){return{"pt-28":a}},X=[{path:"",component:(()=>{class a{constructor(t,o,r,s,l,d,f,M,B,F,G,j){this.Platform=t,this.navCtrl=o,this.backgroundService=r,this.db=s,this.router=l,this.api=d,this.storage=f,this.sqlite=M,this.loadingController=B,this.alertController=F,this.route=G,this.analyticservice=j,this.headerData={title:"ENTER DETAILS",button_text:"Route Complete",serach:!1},this.collectionDetails=[{name:"Route Complete"},{name:"Scan"}],this.details="",this.buttonDisabled=!1,this.api.netWorkOn.asObservable(),this.dropOff=this.route.snapshot.queryParams.drop_off,this.headerData.sub_title="Enter delivery details below"}ngOnInit(){var t=this;return(0,c.A)(function*(){try{t.authData=JSON.parse(localStorage.getItem("auth")||"[]"),yield t.db.getDropOffData()}catch(o){console.error("Error in ngOnInit:",o)}})()}done(){var t=this;return(0,c.A)(function*(){try{t.localStorData=t.dropOff?(yield t.storage.get("drop_off"))||"[]":(yield t.storage.get("outbox"))||"[]";let o=JSON.parse(t.localStorData)||[];o instanceof Array||(o=[o]),o[0].details=t.details,o[0].date=(new Date).toISOString(),t.dropOff?(yield t.storage.set("drop_off",JSON.stringify(o)),t.buttonDisabled=!0,t.dropOffData()):(yield t.storage.set("outbox",JSON.stringify(o)),t.buttonDisabled=!0,t.CollectionData())}catch(o){console.error("Error in done:",o)}})()}CollectionData(){var t=this;return(0,c.A)(function*(){t.storeCollectionData()})()}storeCollectionData(){var t=this;return(0,c.A)(function*(){try{let o=(yield t.storage.get("outbox"))||"[]";const r=JSON.parse(o);t.analyticservice.log({name:"store_collectionData",params:r}),(yield m.l.getStatus()).connected?t.backgroundService.apiCall(r):yield t.db.insertRecord(r),t.db.dataScan.next(!0),t.Platform.is("ios")?t.navCtrl.navigateRoot(["/tabs/scan-collection"]):t.router.navigateByUrl("/tabs/scan-collection")}catch(o){console.error("Error in storeCollectionData:",o)}})()}dropOffData(){var t=this;return(0,c.A)(function*(){try{let o=(yield t.storage.get("drop_off"))||"[]";const r=JSON.parse(o);(yield m.l.getStatus()).connected?t.backgroundService.apiDropOffCall(r):yield t.db.insertDropOffRecord(r),t.db.dataScan.next(!0),t.Platform.is("ios")?t.navCtrl.navigateRoot(["/tabs/drop-off"]):t.router.navigateByUrl("/tabs/drop-off")}catch(o){console.error("Error in done:",o)}})()}markLocation(t){var o=this;return(0,c.A)(function*(){o.api.markLocation({email:"sam@mrmccouriers.com",password:"sXR&D5$B4k7naha8",invoice_number:t}).subscribe(s=>{})})()}dataURLtoFile(t,o){let r=t.split(","),s=r[0].match(/:(.*?);/),l=atob(r[r.length-1]),d=l.length,f=new Uint8Array(d);for(;d--;)f[d]=l.charCodeAt(d);return new File([f],o,{type:s})}presentLoading(){var t=this;return(0,c.A)(function*(){const o=yield t.loadingController.create({cssClass:"spinner"});return yield o.present(),o})()}capitalizeFirstLetter(){this.details.length>0&&(this.details=this.details.charAt(0).toUpperCase()+this.details.slice(1))}static{this.\u0275fac=function(o){return new(o||a)(e.rXU(b.OD),e.rXU(b.q9),e.rXU(C.g),e.rXU(y.a),e.rXU(p.Ix),e.rXU(D.G),e.rXU(O.w),e.rXU(x.j),e.rXU(i.Xi),e.rXU(i.hG),e.rXU(p.nX),e.rXU(E.L))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["app-enter-details"]],decls:12,vars:8,consts:[[1,"ion-no-border"],[3,"headerObj"],[1,"ion-padding","enter-details",3,"ngClass","fullscreen"],["size","12","class","ion-text-center",4,"ngIf"],["size","12",1,"enter-from"],["fill","outline","placeholder","Box was unlocked",3,"ngModel","ngModelChange","input"],["size"," 12",1,"enter-from","ion-text-center"],[3,"disabled","click"],["size","12",1,"ion-text-center"],[1,"text-title"]],template:function(o,r){1&o&&(e.j41(0,"ion-header",0),e.nrm(1,"app-sub-header",1),e.k0s(),e.j41(2,"ion-content",2)(3,"ion-grid")(4,"ion-row"),e.DNE(5,U,3,0,"ion-col",3),e.k0s(),e.j41(6,"ion-row")(7,"ion-col",4)(8,"ion-textarea",5),e.bIt("ngModelChange",function(l){return r.details=l})("input",function(){return r.capitalizeFirstLetter()}),e.k0s()(),e.j41(9,"ion-col",6)(10,"ion-button",7),e.bIt("click",function(){return r.done()}),e.EFF(11,"Done "),e.k0s()()()()()),2&o&&(e.R7$(1),e.Y8G("headerObj",r.headerData),e.R7$(1),e.Y8G("ngClass",e.eq3(6,R,!r.dropOff))("fullscreen",!0),e.R7$(3),e.Y8G("ngIf",!r.dropOff),e.R7$(3),e.Y8G("ngModel",r.details),e.R7$(2),e.Y8G("disabled",r.buttonDisabled))},dependencies:[u.BC,u.vS,h.YU,h.bT,i.Jm,i.hU,i.W9,i.lO,i.eU,i.ln,i.IO,i.nc,i.Gw,S.R],styles:[".pt-28[_ngcontent-%COMP%]{--padding-top: 28pt}.enter-details[_ngcontent-%COMP%]   ion-textarea[_ngcontent-%COMP%]{margin-top:22pt;--background: var(--app-bg-color);--border-color: #BBBBBB;--placeholder-color: var(--ion-font-gray-dark);height:230pt;border-radius:10px;font-size:10.33pt;--border-width: 2.9px;--border-radius: 10px}.enter-details[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{width:50%}  .spinner{--backdrop-opacity: 0;box-shadow:none!important;--spinner-color: var(--ion-text-green);--height: 80px !important;--width: 80px !important}  .loading-wrapper.sc-ion-loading-md, .sc-ion-loading-ios[_ngcontent-%COMP%]{--background: transparent !important;-webkit-box-shadow:none!important}  .textarea-wrapper .sc-ion-textarea-ios{border:1px solid #bbbbbb!important;border-radius:10px!important}  .native-wrapper.sc-ion-textarea-ios textarea.sc-ion-textarea-ios{padding-left:10px!important}  .alert-button-group>button{color:#fff!important}  .alert-wrapper.sc-ion-alert-ios{background:var(--ion-text-green)!important}  .my-custom-class .alert-message{color:#fff!important}  .alert-button.sc-ion-alert-ios{font-size:15px}"]})}}return a})()}];let A=(()=>{class a{static{this.\u0275fac=function(o){return new(o||a)}}static{this.\u0275mod=e.$C({type:a})}static{this.\u0275inj=e.G2t({imports:[p.iI.forChild(X),p.iI]})}}return a})(),I=(()=>{class a{static{this.\u0275fac=function(o){return new(o||a)}}static{this.\u0275mod=e.$C({type:a})}static{this.\u0275inj=e.G2t({imports:[u.YN,u.X1,h.MD,i.bv,v.c,A]})}}return a})()}}]);